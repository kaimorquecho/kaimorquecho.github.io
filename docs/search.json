[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Here is where I describe what I do profesisonally"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kaiju Morquecho Rubalcava",
    "section": "",
    "text": "Kaiju Morquecho Rubalcava graduated from the University of California, Santa Barbara, in 2021 with a Bachelor of Arts degree in Environmental Studies. During their undergraduate career, Kaiju studied food justice and land sovereignty, inspired by their grandparents’ land stewardship history and the food insecurity they experienced as an Indigenous Mexican immigrant. They served as the Co-Chair of UC Santa Barbara’s Environmental Justice Alliance, where they used the $35,000 budget to engage the UCSB community through workshops, speaker events, and sponsored scholarships for undocumented students interested in environmental justice. Under the supervision of UCSB’s food and farming professor and mentor Liz Carlisle, they created an artistic thesis about the direct relationship between colonialism, capitalism, and food injustice. They also worked as a restoration intern for the Cheadle Center for Biodiversity and Ecological Restoration and as a summer research assistant to Bren PhD student Jason Maier, immersing themselves in Python without prior experience to analyze Food and Agriculture Organization data. After completing the MEDS program, Kaiju is committed to upholding the pillars of Indigenous data sovereignty and applying data science skills to solve problems that plague the food supply chain and perpetuate food and land injustice."
  },
  {
    "objectID": "delete_later/practice.html",
    "href": "delete_later/practice.html",
    "title": "Here is my level one header",
    "section": "",
    "text": "Here is my level one header\nHere is my first paragraph\nHere is my second paragraph, where you can read more about MEDS.\nThis is very important text!"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blog",
    "section": "",
    "text": "A Data Bias Case Study: Nuclear Energy\n\n\n\n\n\n\nKaiju Morquecho Rubalcava\n\n\nDec 11, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualizing the Eaton and Palisades Fires and the Social Dimensions of Wildfire Risk in California\n\n\n\n\n\n\nKaiju Rubalcava Morquecho\n\n\nDec 3, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nPredictors of food security and affordability in California\n\n\nIn this blog I explore how geography and socio-economic factors influence annual food costs in female-headed households.\n\n\n\nKaiju Morquecho Rubalcava\n\n\nDec 13, 2024\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html",
    "href": "posts/2024-10-18-my-first-post/index.html",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#this-is-my-first-section",
    "href": "posts/2024-10-18-my-first-post/index.html#this-is-my-first-section",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "I’m going to insert a footnote here 1"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#this-is-my-second",
    "href": "posts/2024-10-18-my-first-post/index.html#this-is-my-second",
    "title": "Predictors of food security and affordability in California",
    "section": "This is my second",
    "text": "This is my second\nHere’s my next paragraph2\nI’m citing me(Csik 2022)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#footnotes",
    "href": "posts/2024-10-18-my-first-post/index.html#footnotes",
    "title": "Predictors of food security and affordability in California",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nINEGI ENDISEG↩︎"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#why-food-affordability",
    "href": "posts/2024-10-18-my-first-post/index.html#why-food-affordability",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#now-lets-dive-into-the-data",
    "href": "posts/2024-10-18-my-first-post/index.html#now-lets-dive-into-the-data",
    "title": "Predictors of food security and affordability in California",
    "section": "Now, let’s dive into the data!",
    "text": "Now, let’s dive into the data!\n\nData description\n\nThe data set was created by the U.S Department of Public Health, using data from:\n\nU.S Census Bureau’s American Community Survey (CA households and family data, and median income data)\nU.S Department of Agriculture’s Economic Research Reserve (annual food cost data)\nOffice of Health Equity’s Healthy Communities Data and Indicators Project (food affordability ratio)\n\nData from 2006 - 2010 in California\n\n\n\nData cleaning and data exploration\n\nExploration\n\nVisualize distribution of median income (median_income), log-transformed median income(log_income), food cost (cost_yr)\n\n\n\n\n\nTo understand the right-skewed distribution of the median income data\n\n\n\n\n\nTo check if taking log produced desired effect\n\n\n\n\n\nTo check if data needs transformation\n\n\n\n\n\n\n\n\nCleaning\n\nDrop all NAs for median_income. All rows missing data for median_income were also missing cost_yr data. Both of these variables were crucial for my model down the line\nFilter median_income to values less than $120,000 and took the log\nDrop the region_name column to replace it with a new region_name column consisting of 5 different regions, instead of the original 15 regions in the data designated by the Metropolitan Planning Organizations (MPO)\n\nThis will be useful down the line when trying to fit an lm model to the data"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.knit.html",
    "href": "posts/2024-10-18-my-first-post/index.knit.html",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.knit.html#why-food-affordability",
    "href": "posts/2024-10-18-my-first-post/index.knit.html#why-food-affordability",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.knit.html#now-lets-dive-into-the-data",
    "href": "posts/2024-10-18-my-first-post/index.knit.html#now-lets-dive-into-the-data",
    "title": "Predictors of food security and affordability in California",
    "section": "Now, let’s dive into the data!",
    "text": "Now, let’s dive into the data!\n\nData description\n\nThe data set was created by the U.S Department of Public Health, using data from:\n\nU.S Census Bureau’s American Community Survey (CA households and family data, and median income data)\nU.S Department of Agriculture’s Economic Research Reserve (annual food cost data)\nOffice of Health Equity’s Healthy Communities Data and Indicators Project (food affordability ratio)\n\n\n\n\nData cleaning and data exploration\n\nExploration\n\nVisualize distribution of median income (median_income), log-transformed median income(log_income), food cost (cost_yr)\n\nCleaning\n\nDrop all NAs for median_income. All rows missing data for median_income were also missing cost_yr data. Both of these variables were crucial for my model down the line\nFilter median_income to values less than $120,000 and took the log\nDrop the region_name column to replace it with a new region_name column consisting of 5 different regions, instead of the original 15 regions in the data designated by the Metropolitan Planning Organizations (MPO)\n\n\nHere’s my next paragraph2\nI’m citing me(Csik 2022)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.knit.html#footnotes",
    "href": "posts/2024-10-18-my-first-post/index.knit.html#footnotes",
    "title": "Predictors of food security and affordability in California",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nINEGI ENDISEG↩︎\nhere is my second footnote↩︎"
  },
  {
    "objectID": "posts/2024-10-18-my-first-post/index.html#analysis-plan",
    "href": "posts/2024-10-18-my-first-post/index.html#analysis-plan",
    "title": "Predictors of food security and affordability in California",
    "section": "Analysis Plan",
    "text": "Analysis Plan\n\nRandomization Hypothesis Test\n\nI conducted a randomization hypothesis test first because I wanted to avoid diving deeper into the relationship between CA region and food cost if there wasn’t one to explore in the first place\n\nNull Hypothesis (H0): Region does not have a significant effect on food cost.\nAlternative Hypothesis (H1): Region does have a significant effect on food cost.\n\nI repeated the randomization test for 4 different pairs of regions to ascertain that the relationship between food cost and region existed for all 5 regions, not just one.\n\n\n\n\n\nNull distribution of regions 3&4\n\n\nThe resulting p-value of every single randomization test was 0 or virtually 0, giving me strong evidence to reject the null hypothesis. Under the assumption that the null is true, it is very unlikely that the observed food cost data would occur by chance.\nHere’s my next footnote2\nI’m citing me(Csik 2022)"
  },
  {
    "objectID": "about.html#what-i-do-for-work",
    "href": "about.html#what-i-do-for-work",
    "title": "About",
    "section": "",
    "text": "Here is where I describe what I do profesisonally"
  },
  {
    "objectID": "about.html#what-i-do-for-fun",
    "href": "about.html#what-i-do-for-fun",
    "title": "About",
    "section": "What I do for fun",
    "text": "What I do for fun\nGive the people what they want"
  },
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "Resources Page",
    "section": "",
    "text": "this is an h1 element with the title class\n\nthis paragraph is eerie-black\n\n\nthis text is justified\n\n\nthis text is both justified and eerie-black\n\n\nHere’s where I’m describing something fun that I that I enjoy doing\nHere’s a full line\n\nHere’s one line Here’s another line"
  },
  {
    "objectID": "posts/predictors_food_security/index.html",
    "href": "posts/predictors_food_security/index.html",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/predictors_food_security/index.html#why-food-affordability",
    "href": "posts/predictors_food_security/index.html#why-food-affordability",
    "title": "Predictors of food security and affordability in California",
    "section": "",
    "text": "My initial project proposal sought to investigate the correlations between food insecurity and gender identity in Mexico using INEGI data. However, the datasets of interest were virtually impossible to join based on geography. Furthermore, the datasets available to download were limited to certain years and only certain sections of the surveys of my interest (ENSANUT and ENDISEG).\nInstead, I am analyzing food affordability data from California, specifically that of female-headed households, across CA regions. This project is only a starting point in exploring the challenges and systemic obstacles faced by female-identifying heads of households. In fact, the main learning outcome of the project, as I will show below, is that almost any environmental issue, including food security, requires a nuanced & complex understanding of its origin for there to be a just solution to it.\nIf you are interested in exploring Mexico’s first gender non-conforming census survey, check out this page! 1"
  },
  {
    "objectID": "posts/predictors_food_security/index.html#footnotes",
    "href": "posts/predictors_food_security/index.html#footnotes",
    "title": "Predictors of food security and affordability in California",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nINEGI ENDISEG↩︎"
  },
  {
    "objectID": "posts/false_color_image/hwk4-task2-false-color-Morquecho.html",
    "href": "posts/false_color_image/hwk4-task2-false-color-Morquecho.html",
    "title": "Homework 4: Task 2 - Visualizing Fires with False Color Images",
    "section": "",
    "text": "Github Repository"
  },
  {
    "objectID": "posts/false_color_image/hwk4-task2-false-color-Morquecho.html#about",
    "href": "posts/false_color_image/hwk4-task2-false-color-Morquecho.html#about",
    "title": "Homework 4: Task 2 - Visualizing Fires with False Color Images",
    "section": "About",
    "text": "About\nThe repository contains files for EDS 220’s Homework 4, task 2. The Jupyter notebook called ‘hwk4-task2-false-color-Morquecho.ipynb’ contains a python analysis and visualization of the data mentioned below using false and true color imagery to show the burn areas of the January 2025 Palisades & Eaton fires in California.\n\nPurpose:\nThe purpose is to use xarray data to create true and false color images that display the burn areas of the Eaton and Palisades fires that occurred in January of 2025.\n\n\nHighlights\n\nPlot true color images from xarray data\nPlot false color images from xarray data\nUse perimeter data, in addition to the Landsat data, to create an informative map.\nAddress common remote sensing data issues: extreme and np.nan values when plotting.\n\n\n\nAbout the Data\n\nFire perimeter data sourced from the eGIS LA County hub, which is comprised of dissolved fire perimeters for the Eaton and Palisades fires.\nLandsat Data from the Landsat Collection 2 Level-2 atmospherically corrected surface reflectance data, Landsat 8 satellite.\n\n\n\nReferences\nLos Angeles County GIS. (2025). Palisades and Eaton Dissolved Fire Perimeters (2025) [Data layer]. eGIS LA County Hub. https://egis-lacounty.hub.arcgis.com/maps/lacounty::palisades-and-eaton-dissolved-fire-perimeters-2025/about. Accessed November 22, 2025, via ArcGIS: https://www.arcgis.com/home/item.html?id=ad51845ea5fb4eb483bc2a7c38b2370c\nEarth Resources Observation and Science (EROS) Center. (2025). Landsat 8-9 Operational Land Imager / Thermal Infrared Sensor Level-2, Collection 2 [dataset]. U.S. Geological Survey. https://doi.org/10.5066/P9OGBGM6. Accessed November 22, 2025, via Microsoft Planetary Computer: https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2.\n\n\n1. Import Libraries and Load Datasets\n\n# Import Libraries\n\nimport os\nimport pandas as pd\nimport numpy as np\nimport geopandas as gpd\nfrom matplotlib.lines import Line2D\nimport matplotlib.pyplot as plt\nimport xarray as xr   \nimport rioxarray as rioxr\nimport contextily as ctx\n\n\n# Import Data \n\n# Fire Perimeter Data\neaton = gpd.read_file(os.path.join('data','Eaton_Perimeter_20250121','Eaton_Perimeter_20250121.shp')) # Eaton Fire Perimeter\npalisades = gpd.read_file(os.path.join('data','Palisades_Perimeter_20250121','Palisades_Perimeter_20250121.shp')) # Palisades Fire Perimeter\n\n# Landsat NetCDF File\nlandsat = xr.open_dataset(os.path.join('data','landsat8-2025-02-23-palisades-eaton.nc'))\n\n\n\n2. Explore Fire and Landsat Datasets\n\na. Landsat Data Exploration\n\n# Explore landsat data (see attributes, variables, and dimensions)\nlandsat\n\n\n# Check units of landsat data coordinates \nprint(f'x coordinates have unit: {landsat[\"x\"].attrs.get(\"units\")}')\nprint(f'y coordinates have unit: {landsat[\"y\"].attrs.get(\"units\")}')\n\n\n\nLandsat Data Exploration Summary\nI explored the Landsat NetCDF xaaray dataset (landsat8-2025-02-23-palisades-eaton.nc), which contains multiple variables: spectral bands (red, green, blue, nir08, swir22) stored as 2D arrays with dimensions (1418,2742) collected by the Landsat 8 satellite. The dataset includes a time coordinate (containing just one value given that the data is from Feb 23, 2025) and a spatial_ref attribute. Both x and y coordinates are in metres, confirming that the data is projected in a UTM projected coordinate system.\n\n\nb. Fire Perimeter Data Exploration\nExplore the fire perimeter data.\n\n# Check Eaton fire perimeter data's CRS \nprint(eaton.crs)\n\n# Verify that Eaton fire perimeter data is on same CRS as the Palisades fire perimeter data\nassert(eaton.crs==palisades.crs) # Assert test confirms that they are on the same CRS system (EPSG 3857)\n\n\n# Check if Eaton and Palisades datasets are projected\nprint(f\"The Eaton fire perimeter dataset projected: {eaton.crs.is_projected}\")\nprint(f\"The Palisades fire perimeter dataset projected: {palisades.crs.is_projected}\")\n\n\n# Check Eaton dataset's columns and their data types\neaton.dtypes\n\n\n# Check Palisades dataset's columns and their data types\npalisades.dtypes\n\n\npalisades.plot()\neaton.plot()\n\n\n\nFire Perimeter Data Exploration Summary\nI explored the fire perimeter datasets for both the Eaton and Palisades fires, obtained from LACounty’s ArcGIS Hub. The datasets contain the dissolved fire perimeters, as of January 21, 2025, share the same coordinate reference system (EPSG 3857), and are projected. Each dataset contains columns for OBJECTID, type, Shape__Are, Shape__Len, and geometry. It is interesting and alarming to see how extensive the fires (and therefore, their perimeters) were, especially given that they gained so much territory within 24 hours.\n\n\n\n3. Restore Landsat Geospatial Information\n\n# Check dataset's CRS\nprint(landsat.rio.crs)\n\nWhile we cannot access a CRS in Landsat, that does not mean the dataset is not a geospatial object. Access the spatial_ref.crs_wkt attribute of the dataset and print the CRS.\n\n# Access and extract spatial_ref.crs_wkt attribute and store in variable\nlandsat_crs = landsat.spatial_ref.crs_wkt\n\ntype(landsat_crs) # Check that it is an acceptable object for next step\n\n\n# Use rio.write_crs() to recover the geospatial information \nlandsat.rio.write_crs(landsat_crs, inplace=True)\n\n\n# Check that dataset has been updated with the CRS\nprint(landsat.rio.crs)\n\n\n\n4. Plot a True Color Image Using Landsat Data\n\nlandsat[['red','green','blue']].to_array().plot.imshow()\n\n\na. The true color image looks blank due to the RGB values of the clouds. Their values are outliers that are causing the other RGB values to be squished when plotting. To fix this, adjust the robust paramater of the imshow() method.\n\nlandsat[['red','green','blue']].to_array().plot.imshow(robust = True)\n\n\n\nb. To resolve the RuntimeWarning: invalid value encountered in cast xx = (xx * 255).astype(np.uint8) warning, identify the bands with nan values, which .plot.imshow() sees as invalid.\n\n# use isnan() and .sum() to find the sum of nans in each band in landsat dataset\nnan_mask = np.isnan(landsat[['red','green','blue']].to_array()).sum(dim=['y','x'])\n\n\n# Print the results by band\nfor band, count in zip(nan_mask['variable'].values, nan_mask.values):\n    print(f'{band} band has {count} nans')\n\n\n\nc. Use fillna() to replace nans with zeros and plot again\n\nlandsat[['red','green','blue']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\nInitial and final true color image comparison:\nInitial attempt to plot the true color image raised two warnings and produced a white image. The first warning was due to extreme values (likely clouds) in the landsat data. These values were extreme RGB outliersn that squished other RGB values. The second warning was due to np.nan values, which were invalid values for xarray. The first warning was resolved by adjusting the robust paramater of the imshow() method, and the second by replacing the np.nan values with zeros. After this, the true color image was accurate and without warnings.\n\n\n\n5. False Color Image\n\n# Plot a false color image using landsat data variables 'swir22','nir08', and 'red' (short-wave infrared, near-infrared, and red band)\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\n6. Map False Color Image and Fire Perimeters\n\n# Update Eaton and Palisades crs to landsat dataset's crs before plotting \neaton = eaton.to_crs(landsat.rio.crs)\n\npalisades = palisades.to_crs(eaton.crs)\n\n# Assert that datasets are now on same crs\nassert(eaton.crs == palisades.crs == landsat.rio.crs)\n\n\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True,\n                                                                        ax=ax) # Landsat image\neaton.plot(ax=ax, # Eaton fire perimeter\n          color = 'none',\n          edgecolor = 'deeppink',\n          linewidth = 2.5)\n\npalisades.plot(ax=ax, # Palisades fire perimeter\n              color = 'none',\n              edgecolor = 'deeppink',\n              linewidth = 2.5)\n\n# Label fire perimeters\nax.text(x=385000, y=3785000, s=\"Eaton\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white') \nax.text(x=340000, y=3773000, s=\"Palisades\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white')\n\n# Create a legend for the fire perimeters\nfire_line = Line2D([0], [0], color='deeppink', linewidth=2.5, label='Fire Perimeter')\nax.legend(handles=[fire_line], loc='lower left', fontsize=14, facecolor='white', shadow=True)\n\nax.set_title('Burn Scars After Eaton and Palisades Fires, Jan 2025',\n            fontsize = 20,\n            weight='bold')\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n\n\n\nBurn Scars After Eaton and Palisades Fires, Jan 2025 Map Description:\nThe map is a false color image created using short-wave infrared (SWIR), near-infrared (NIR), and the red color band. These were assigned to the red channel, green channel, and blue channel, in that order. On top of the image I plotted the perimeters of the Eaton and Palisades burn areas (color orange) with the color ‘darkorchid’ to clearly outline their location."
  },
  {
    "objectID": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html",
    "href": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html",
    "title": "Visualizing the Eaton and Palisades Fires and the Social Dimensions of Wildfire Risk in California",
    "section": "",
    "text": "Github Repository"
  },
  {
    "objectID": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#about",
    "href": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#about",
    "title": "Visualizing the Eaton and Palisades Fires and the Social Dimensions of Wildfire Risk in California",
    "section": "About",
    "text": "About\nThis repository contains files for the ‘Working with Environmental Datasets’ course (EDS 220), Homework 4, task 2. The Jupyter notebook hwk4-task2-false-color-Morquecho.ipynb contains a python analysis and visualization of the data mentioned below using false and true color imagery to show the burn areas of the January 2025 Palisades & Eaton fires in California.\n\nRepository Structure\n├── .gitignore\n├── hwk4-task2-false-color-Morquecho.ipynb\n├── README.md\n\n\nPurpose\nThe purpose of this repository is to use netCDF4 data files, accessed with the xarray library, to visualize the burn scars from the Eaton and Palisades fires that occurred in January of 2025.\n\n\nHighlights\n\nUse the xarray library to streamline analysis of netCDF4 files containing multidimensional data\nUse false color imagery to highlight burn areas after California wildfires\nAddress common remote sensing data issues such as extreme and np.nan values that distort data visualizations\n\n\n\nAbout the Data\n\nFire perimeter data are sourced from the eGIS LA County hub, and can be accessed and downloaded by selecting the desired layer and clicking ‘Download’. Dataset for the layer Eaton_Perimeter_20250121 contains the .shp file of the Eaton Fire dissolved perimeter, while Palisades_Perimeter_20250121 contains the Palisades Fire dissolved perimeter. Both datasets are in the EPSG:3857 CRS.\nLandsat data was provided by the course instructor, Dr. Carmen Galaz Garcia, as a simplified collection of bands (red, green, blue, near-infrared, and shortwave infrared). The data comes from the Landsat Collection 2 level-2 atmospherically corrected surface reflectance data, which is collected by the Landsat 8 satellite. The original data and other related datasets can be retrieved from the Microsoft Planetary Computer. The data is in the EPSG:32611 CRS.\nThe Environmental Justice Index (EJI), produced by the Centers for Disease Control and Prevention and the Agency for Toxic Substances and Disease Registry, provides nationwide measures of cumulative environmental, social, and health burden at the census tract scale. The dataset combines indicators related to environmental exposures, underlying health conditions, and socioeconomic vulnerability to identify communities that may face disproportionate environmental and health risks. The data can be accessed and downloaded from the CDC website. The data is in the EPSG:4269 CRS.\n\n\n\nReferences\nLos Angeles County GIS. (2025). Palisades and Eaton Dissolved Fire Perimeters (2025) [Data layer]. eGIS LA County Hub. https://egis-lacounty.hub.arcgis.com/maps/lacounty::palisades-and-eaton-dissolved-fire-perimeters-2025/about. Accessed November 22, 2025, via ArcGIS: https://www.arcgis.com/home/item.html?id=ad51845ea5fb4eb483bc2a7c38b2370c\nEarth Resources Observation and Science (EROS) Center. (2025). Landsat 8-9 Operational Land Imager / Thermal Infrared Sensor Level-2, Collection 2 [dataset]. U.S. Geological Survey. https://doi.org/10.5066/P9OGBGM6. Accessed November 22, 2025, via Microsoft Planetary Computer: https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2.\nCenters for Disease Control and Prevention and Agency for Toxic Substances Disease Registry. (2025) Environmental Justice Index. Accessed November 28, 2025: https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html\n\n\nImport Libraries and Load Datasets\nAside from the standard libraries such as numpy and matplotlib, the following specialized libraries were used in this analysis: - xarray to access and analyze netCDF4 files (multidimensional datasets) - rioxarray to extend xarray with the rio accessor to read and manipulate raster data - contextily to add basemaps to geospatial visualizations - geopandas to handle vector data such as shapefiles\n\n# Import Libraries\nimport os\nimport pandas as pd\nimport numpy as np\nimport geopandas as gpd\nfrom matplotlib.lines import Line2D\nimport matplotlib.pyplot as plt\nimport xarray as xr   \nimport rioxarray as rioxr\nimport contextily as ctx\n\n\n\nImport Data\n\npd.set_option('display.max_columns', None)\n\n# Fire Perimeter Data\neaton = gpd.read_file(os.path.join('data','Eaton_Perimeter_20250121','Eaton_Perimeter_20250121.shp')) # Eaton Fire Perimeter\npalisades = gpd.read_file(os.path.join('data','Palisades_Perimeter_20250121','Palisades_Perimeter_20250121.shp')) # Palisades Fire Perimeter\n\n# Landsat NetCDF File\nlandsat = xr.open_dataset(os.path.join('data','landsat8-2025-02-23-palisades-eaton.nc'))\n\n# California 2024 EJI Data\neji_data = gpd.read_file(os.path.join('data','EJI_2024_California','EJI_2024_California.gdb'))\n\n\n\nExplore Fire and Landsat Datasets\nI begin the analysis by exploring the datasets I will use to understand their structure and contents. It is important to be familiar with the dimensions, variables, indexes,and attributes of the NetCDF4 file. NetCDF4 files, in particular, can contain multiple variables stored as multidimensional arrays, along with metadata that describes the data.\n\n\nLandsat Data Exploration\n\n# Explore landsat data (see attributes, variables, and dimensions)\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...\n    spatial_ref  int64 8B ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (3)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]Data variables: (6)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]spatial_ref()int64...crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :334395.0 30.0 0.0 3799065.0 0.0 -30.0[1 values with dtype=int64]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Check units of landsat data coordinates \nprint(f'x coordinates have unit: {landsat[\"x\"].attrs.get(\"units\")}')\nprint(f'y coordinates have unit: {landsat[\"y\"].attrs.get(\"units\")}')\n\nx coordinates have unit: metre\ny coordinates have unit: metre\n\n\n\n\nLandsat Data Exploration Summary\nI explore the Landsat NetCDF xaaray dataset (landsat8-2025-02-23-palisades-eaton.nc), which contains multiple variables: spectral bands (red, green, blue, nir08, swir22) stored as 2D arrays with dimensions (1418,2742) collected by the Landsat 8 satellite. The dataset includes a time coordinate (containing just one value given that the data is from Feb 23, 2025) and a spatial_ref attribute. Both x and y coordinates are in metres, confirming that the data is projected in a UTM projected coordinate system.\n\n\nFire Perimeter Data Exploration\nI explore the fire perimeter data to find their CRS, compatibility with one another, and other relevant attributes.\n\n# Check Eaton fire perimeter data's CRS \nprint(eaton.crs)\n\n# Verify that Eaton fire perimeter data is on same CRS as the Palisades fire perimeter data\nassert(eaton.crs==palisades.crs) # Assert test confirms that they are on the same CRS system (EPSG 3857)\n\nEPSG:3857\n\n\n\n# Check if Eaton and Palisades datasets are projected\nprint(f\"The Eaton fire perimeter dataset projected: {eaton.crs.is_projected}\")\nprint(f\"The Palisades fire perimeter dataset projected: {palisades.crs.is_projected}\")\n\nThe Eaton fire perimeter dataset projected: True\nThe Palisades fire perimeter dataset projected: True\n\n\n\n# Check Eaton dataset's columns and their data types\neaton.dtypes\n\nOBJECTID         int64\ntype            object\nShape__Are     float64\nShape__Len     float64\ngeometry      geometry\ndtype: object\n\n\n\n# Check Palisades dataset's columns and their data types\npalisades.dtypes\n\nOBJECTID         int64\ntype            object\nShape__Are     float64\nShape__Len     float64\ngeometry      geometry\ndtype: object\n\n\n\npalisades.plot()\neaton.plot()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFire Perimeter Data Exploration Summary\nI explore the fire perimeter datasets for both the Eaton and Palisades fires, obtained from LACounty’s ArcGIS Hub. The datasets contain the dissolved fire perimeters, as of January 21, 2025, share the same coordinate reference system (EPSG 3857), and are projected. Each dataset contains columns for OBJECTID, type, Shape__Are, Shape__Len, and geometry. It is interesting and alarming to see how extensive the fires (and therefore, their perimeters) were, especially given that they gained so much territory within 24 hours.\n\n\nRestore Landsat Geospatial Information\n\n# Check dataset's CRS using the rio accessor\nprint(landsat.rio.crs)\n\nNone\n\n\nWhile we cannot access the CRS in Landsat, that does not mean the dataset is not a geospatial object. I can access the spatial_ref.crs_wkt attribute of the dataset and print the CRS.\n\n# Access and extract spatial_ref.crs_wkt attribute and store in variable\nlandsat_crs = landsat.spatial_ref.crs_wkt\n\ntype(landsat_crs) # Check that it is an acceptable object for next step ( a string)\n\nstr\n\n\n\n# Use rio.write_crs() and the extracted attribute to recover the geospatial information \nlandsat.rio.write_crs(landsat_crs, inplace=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\n    spatial_ref  int64 8B 0\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (4)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Data variables: (5)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Check that dataset has been updated with the CRS\nprint(landsat.rio.crs)\n\nEPSG:32611\n\n\n\n\nPlot a True Color Image Using Landsat Data\nThis type of image approximates what the human eye would see on the ground, making it useful for gaining an intuitive understanding of the landscape: identifying vegetation, urban areas, water, and cloud cover.\n\nlandsat[['red','green','blue']].to_array().plot.imshow()\n\nClipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\n\n\n/opt/miniconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\nThe true color image looks blank due to the RGB values of the clouds. Their values are outliers that are causing the other RGB values to be squished when plotting. To fix this, I adjust the robust paramater of the imshow() method.\n\nlandsat[['red','green','blue']].to_array().plot.imshow(robust = True)\n\n/opt/miniconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\nTo resolve the RuntimeWarning: invalid value encountered in cast xx = (xx * 255).astype(np.uint8) warning, identify the bands with nan values, which .plot.imshow() sees as invalid.\n\n# use isnan() and .sum() to find the sum of nans in each band in landsat dataset\nnan_mask = np.isnan(landsat[['red','green','blue']].to_array()).sum(dim=['y','x'])\n\n\n# Print the results by band\nfor band, count in zip(nan_mask['variable'].values, nan_mask.values):\n    print(f'{band} band has {count} nans')\n\nred band has 0 nans\ngreen band has 1 nans\nblue band has 109 nans\n\n\nNext, I use fillna() to replace nans with zeros to resolve the other warning and visualize again\n\nlandsat[['red','green','blue']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\n\n\n\n\n\n\n\nInitial and final true color image comparison:\nInitial attempt to plot the true color image raised two warnings and produced a white image. The first warning was due to extreme values (likely clouds) in the landsat data. These values were extreme RGB outliers that squished other RGB values. The second warning was due to np.nan values, which were invalid values for xarray. I resolved the first warning by adjusting the robust paramater of the imshow() method, and the second by replacing the np.nan values with zeros. After this, the true color image was accurate and without warnings.\n\n\nFalse Color Image\n\n# Plot a false color image using landsat data variables 'swir22','nir08', and 'red' (short-wave infrared, near-infrared, and red band)\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\n\n\n\n\n\n\n\nMap False Color Image and Fire Perimeters\n\n# Update Eaton and Palisades crs to landsat dataset's crs before plotting \neaton = eaton.to_crs(landsat.rio.crs)\n\npalisades = palisades.to_crs(eaton.crs)\n\n# Assert that datasets are now on same crs\nassert(eaton.crs == palisades.crs == landsat.rio.crs)\n\n\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True,\n                                                                        ax=ax) # Landsat image\neaton.plot(ax=ax, # Eaton fire perimeter\n          color = 'none',\n          edgecolor = 'deeppink',\n          linewidth = 2.5)\n\npalisades.plot(ax=ax, # Palisades fire perimeter\n              color = 'none',\n              edgecolor = 'deeppink',\n              linewidth = 2.5)\n\n# Label fire perimeters\nax.text(x=385000, y=3785000, s=\"Eaton\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white') \nax.text(x=340000, y=3773000, s=\"Palisades\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white')\n\n# Create a legend for the fire perimeters\nfire_line = Line2D([0], [0], color='deeppink', linewidth=2.5, label='Fire Perimeter')\nax.legend(handles=[fire_line], loc='lower left', fontsize=14, facecolor='white', shadow=True)\n\nax.set_title('Burn Scars After Eaton and Palisades Fires, Jan 2025',\n            fontsize = 20,\n            weight='bold')\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\nBurn Scars After Eaton and Palisades Fires, Jan 2025 Map Description:\nThe map above is a false-color visualization created using short-wave infrared (SWIR), near-infrared (NIR), and red bands, assigned to the red, green, and blue channels respectively. This band combination highlights vegetation and burn scars, with recently burned areas appearing in deep magenta or dark tones. On top of the map, I plotted the perimeters of the Eaton and Palisades burn areas using the color darkorchid to clearly outline their locations."
  },
  {
    "objectID": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#import-libraries-and-load-datasets",
    "href": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#import-libraries-and-load-datasets",
    "title": "Homework 4: Task 2 - Visualizing Fires with False Color Images",
    "section": "Import Libraries and Load Datasets",
    "text": "Import Libraries and Load Datasets\nAside from the standard libraries such as numpy and matplotlib, the following specialized libraries were used in this analysis: - xarray to access and analyze netCDF4 files (multidimensional datasets) - rioxarray to extend xarray with the rio accessor to read and manipulate raster data - contextily to add basemaps to geospatial visualizations - geopandas to handle vector data such as shapefiles\n\n# Import Libraries\n\nimport os\nimport pandas as pd\nimport numpy as np\nimport geopandas as gpd\nfrom matplotlib.lines import Line2D\nimport matplotlib.pyplot as plt\nimport xarray as xr   \nimport rioxarray as rioxr\nimport contextily as ctx"
  },
  {
    "objectID": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#import-data",
    "href": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#import-data",
    "title": "Homework 4: Task 2 - Visualizing Fires with False Color Images",
    "section": "Import Data",
    "text": "Import Data\nDESCRIBE THE DATA SOURCES DESCRIBE THE CONTENTS OF THE NETCDF4 FILE FROM LANDSAT DESCRIBE THE CONTENTS OF THE SHAPEFILES FROM THE FIRE PERIMETERS\n\n# Fire Perimeter Data\neaton = gpd.read_file(os.path.join('data','Eaton_Perimeter_20250121','Eaton_Perimeter_20250121.shp')) # Eaton Fire Perimeter\npalisades = gpd.read_file(os.path.join('data','Palisades_Perimeter_20250121','Palisades_Perimeter_20250121.shp')) # Palisades Fire Perimeter\n\n# Landsat NetCDF File\nlandsat = xr.open_dataset(os.path.join('data','landsat8-2025-02-23-palisades-eaton.nc'))\n\n# EJI Data\neji_data = gpd.read_file(os.path.join('data','EJI_2024_California','EJI_2024_California.gdb'))\n\n\nExplore Fire and Landsat Datasets\nExplore the datasets to understand their structure and contents. It is important to be familiar with the dimensions, variables, indexes,and attributes of the NetCDF4 file\n\nLandsat Data Exploration\n\n# Explore landsat data (see attributes, variables, and dimensions)\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...\n    spatial_ref  int64 8B ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (3)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]Data variables: (6)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]spatial_ref()int64...crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :334395.0 30.0 0.0 3799065.0 0.0 -30.0[1 values with dtype=int64]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Check units of landsat data coordinates \nprint(f'x coordinates have unit: {landsat[\"x\"].attrs.get(\"units\")}')\nprint(f'y coordinates have unit: {landsat[\"y\"].attrs.get(\"units\")}')\n\nx coordinates have unit: metre\ny coordinates have unit: metre\n\n\n\n\nLandsat Data Exploration Summary\nI explored the Landsat NetCDF xaaray dataset (landsat8-2025-02-23-palisades-eaton.nc), which contains multiple variables: spectral bands (red, green, blue, nir08, swir22) stored as 2D arrays with dimensions (1418,2742) collected by the Landsat 8 satellite. The dataset includes a time coordinate (containing just one value given that the data is from Feb 23, 2025) and a spatial_ref attribute. Both x and y coordinates are in metres, confirming that the data is projected in a UTM projected coordinate system.\n\n\nFire Perimeter Data Exploration\nExplore the fire perimeter data.\n\n# Check Eaton fire perimeter data's CRS \nprint(eaton.crs)\n\n# Verify that Eaton fire perimeter data is on same CRS as the Palisades fire perimeter data\nassert(eaton.crs==palisades.crs) # Assert test confirms that they are on the same CRS system (EPSG 3857)\n\nEPSG:3857\n\n\n\n# Check if Eaton and Palisades datasets are projected\nprint(f\"The Eaton fire perimeter dataset projected: {eaton.crs.is_projected}\")\nprint(f\"The Palisades fire perimeter dataset projected: {palisades.crs.is_projected}\")\n\nThe Eaton fire perimeter dataset projected: True\nThe Palisades fire perimeter dataset projected: True\n\n\n\n# Check Eaton dataset's columns and their data types\neaton.dtypes\n\nOBJECTID         int64\ntype            object\nShape__Are     float64\nShape__Len     float64\ngeometry      geometry\ndtype: object\n\n\n\n# Check Palisades dataset's columns and their data types\npalisades.dtypes\n\nOBJECTID         int64\ntype            object\nShape__Are     float64\nShape__Len     float64\ngeometry      geometry\ndtype: object\n\n\n\npalisades.plot()\neaton.plot()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFire Perimeter Data Exploration Summary\nI explored the fire perimeter datasets for both the Eaton and Palisades fires, obtained from LACounty’s ArcGIS Hub. The datasets contain the dissolved fire perimeters, as of January 21, 2025, share the same coordinate reference system (EPSG 3857), and are projected. Each dataset contains columns for OBJECTID, type, Shape__Are, Shape__Len, and geometry. It is interesting and alarming to see how extensive the fires (and therefore, their perimeters) were, especially given that they gained so much territory within 24 hours.\n\n\n\nRestore Landsat Geospatial Information\n\n# Check dataset's CRS\nprint(landsat.rio.crs)\n\nNone\n\n\nWhile we cannot access a CRS in Landsat, that does not mean the dataset is not a geospatial object. Access the spatial_ref.crs_wkt attribute of the dataset and print the CRS.\n\n# Access and extract spatial_ref.crs_wkt attribute and store in variable\nlandsat_crs = landsat.spatial_ref.crs_wkt\n\ntype(landsat_crs) # Check that it is an acceptable object for next step\n\nstr\n\n\n\n# Use rio.write_crs() to recover the geospatial information \nlandsat.rio.write_crs(landsat_crs, inplace=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\n    spatial_ref  int64 8B 0\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (4)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Data variables: (5)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Check that dataset has been updated with the CRS\nprint(landsat.rio.crs)\n\nEPSG:32611\n\n\n\n\nPlot a True Color Image Using Landsat Data\n\nlandsat[['red','green','blue']].to_array().plot.imshow()\n\nClipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\n\n\n/opt/miniconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\n\nThe true color image looks blank due to the RGB values of the clouds. Their values are outliers that are causing the other RGB values to be squished when plotting. To fix this, adjust the robust paramater of the imshow() method.\n\nlandsat[['red','green','blue']].to_array().plot.imshow(robust = True)\n\n/opt/miniconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\n\n\nTo resolve the RuntimeWarning: invalid value encountered in cast xx = (xx * 255).astype(np.uint8) warning, identify the bands with nan values, which .plot.imshow() sees as invalid.\n\n# use isnan() and .sum() to find the sum of nans in each band in landsat dataset\nnan_mask = np.isnan(landsat[['red','green','blue']].to_array()).sum(dim=['y','x'])\n\n\n# Print the results by band\nfor band, count in zip(nan_mask['variable'].values, nan_mask.values):\n    print(f'{band} band has {count} nans')\n\nred band has 0 nans\ngreen band has 1 nans\nblue band has 109 nans\n\n\n\n\nUse fillna() to replace nans with zeros and plot again\n\nlandsat[['red','green','blue']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\n\n\n\n\n\n\n\nInitial and final true color image comparison:\nInitial attempt to plot the true color image raised two warnings and produced a white image. The first warning was due to extreme values (likely clouds) in the landsat data. These values were extreme RGB outliersn that squished other RGB values. The second warning was due to np.nan values, which were invalid values for xarray. The first warning was resolved by adjusting the robust paramater of the imshow() method, and the second by replacing the np.nan values with zeros. After this, the true color image was accurate and without warnings.\n\n\n\nFalse Color Image\n\n# Plot a false color image using landsat data variables 'swir22','nir08', and 'red' (short-wave infrared, near-infrared, and red band)\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True)\n\n\n\n\n\n\n\n\n\n\nMap False Color Image and Fire Perimeters\n\n# Update Eaton and Palisades crs to landsat dataset's crs before plotting \neaton = eaton.to_crs(landsat.rio.crs)\n\npalisades = palisades.to_crs(eaton.crs)\n\n# Assert that datasets are now on same crs\nassert(eaton.crs == palisades.crs == landsat.rio.crs)\n\n\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\nlandsat[['swir22','nir08','red']].fillna(value=0).to_array().plot.imshow(robust=True,\n                                                                        ax=ax) # Landsat image\neaton.plot(ax=ax, # Eaton fire perimeter\n          color = 'none',\n          edgecolor = 'deeppink',\n          linewidth = 2.5)\n\npalisades.plot(ax=ax, # Palisades fire perimeter\n              color = 'none',\n              edgecolor = 'deeppink',\n              linewidth = 2.5)\n\n# Label fire perimeters\nax.text(x=385000, y=3785000, s=\"Eaton\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white') \nax.text(x=340000, y=3773000, s=\"Palisades\", fontsize=18, color='black', weight='bold', backgroundcolor = 'white')\n\n# Create a legend for the fire perimeters\nfire_line = Line2D([0], [0], color='deeppink', linewidth=2.5, label='Fire Perimeter')\nax.legend(handles=[fire_line], loc='lower left', fontsize=14, facecolor='white', shadow=True)\n\nax.set_title('Burn Scars After Eaton and Palisades Fires, Jan 2025',\n            fontsize = 20,\n            weight='bold')\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\nBurn Scars After Eaton and Palisades Fires, Jan 2025 Map Description:\nThe map is a false color image created using short-wave infrared (SWIR), near-infrared (NIR), and the red color band. These were assigned to the red channel, green channel, and blue channel, in that order. On top of the image I plotted the perimeters of the Eaton and Palisades burn areas (color orange) with the color ‘darkorchid’ to clearly outline their location."
  },
  {
    "objectID": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#social-dimensions-of-eaton-and-palisades-fires",
    "href": "posts/false_color_images/hwk4-task2-false-color-Morquecho.html#social-dimensions-of-eaton-and-palisades-fires",
    "title": "Visualizing the Eaton and Palisades Fires and the Social Dimensions of Wildfire Risk in California",
    "section": "Social Dimensions of Eaton and Palisades Fires",
    "text": "Social Dimensions of Eaton and Palisades Fires\nAfter visualizing the burn areas of the Palisades and Eaton fires using Landsat data, I use Environmental Justice Index (EJI) data for California to understand how wildfires have disproprotionately affected certain communities. I compare the mapped burn scars with Environmental EJI variables such as % of low income and racial/minority status from the census tracts overlapping the fire areas. This analysis underscores how the impact of wildfires intersects with existing social and environmental burdens.\n\nEJI Data Exploration\nTo examine the overlap between the EJI data and the fire perimeters, I first checked the metadata and CRS of the EJI dataset to ensure compatibility with the fire perimeter data (EPSG:3857).\n\nprint(f'EJI Dataset Information:\\n {eji_data.crs}') \n\nEJI Dataset Information:\n PROJCS[\"USA_Contiguous_Albers_Equal_Area_Conic\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],PROJECTION[\"Albers_Conic_Equal_Area\"],PARAMETER[\"latitude_of_center\",37.5],PARAMETER[\"longitude_of_center\",-96],PARAMETER[\"standard_parallel_1\",29.5],PARAMETER[\"standard_parallel_2\",45.5],PARAMETER[\"false_easting\",0],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"ESRI\",\"102003\"]]\n\n\n\n# Use an assert statement to verify that EJI data is on same CRS as fire perimeter data\nassert (eji_data.crs == eaton.crs) \n\n\n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\nCell In[23], line 2\n      1 # Use an assert statement to verify that EJI data is on same CRS as fire perimeter data\n----&gt; 2 assert (eji_data.crs == eaton.crs) \n\nAssertionError: \n\n\n\nThe Assert test shows that the EJI dataset is not on the same CRS as the fire perimeter data. I reproject the EJI dataset to match the fire perimeter data’s CRS using the to_crs() method from geopandas\n\neji_data = eji_data.to_crs(eaton.crs) # Reproject EJI dataset to either fire perimeter data's CRS\n\n\n# Re-run assert test to confirm that EJI dataset is now on same CRS as fire perimeter data\nassert (eji_data.crs == eaton.crs) # Test passes\nassert (eji_data.crs == palisades.crs)\n\nTo visualize the census tracts from the EJI data that overlap with the fire perimeters, I perform spatial joins between the reprojected EJI dataset and each fire perimeter dataset using the sjoin() method, specifying the intersects predicate.\n\n# Census tracts intersecting Palisades fire perimeter\neji_palisades = gpd.sjoin(eji_data, palisades, predicate = 'intersects') \n\n# Census tracts intersecting Eaton fire perimeter\neji_eaton = gpd.sjoin(eji_data, eaton, predicate = 'intersects') \n\nAfter the join, I plot the census tracts that intersect with the fire perimeters, and outline the perimeters in crimson for visibility:\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax2.axis('off')\nax1.axis('off')\n\n# Palisades census tracts\neji_palisades.plot(\n    ax=ax1,\n    color = 'mediumseagreen',\n    edgecolor='white',\n    linewidth=0.3\n)\npalisades.plot(ax=ax1, \n               color='none', \n               edgecolor='crimson',\n               linewidth=1.7)\nax1.set_title(\"Palisades Fire and Intersecting EJI Census Tracts\", fontsize=16)\n\n# Eaton census tracts\neji_eaton.plot(\n    ax=ax2,\n    color = 'mediumseagreen',\n    edgecolor='white',\n    linewidth=0.2\n)\neaton.plot(ax=ax2, \n           color='none', \n           edgecolor='crimson',\n           linewidth=1.7)\nax2.set_title(\"Eaton Fire and Intersecting EJI Census Tracts\", fontsize=16)\n\n# Create a legend for the fire perimeters\nperimeter_line = Line2D([0], [0], color='crimson', linewidth=1.7, label='Fire Perimeter')\nax1.legend(handles=[perimeter_line], loc='lower left', fontsize=14, facecolor='white', shadow=True, bbox_to_anchor=(0.02, 0.05))\n\n\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\nClip census tracts to the Palisades and Eaton fire areas\nTo focus on the census tracts that fall within the fire perimeters, I use the clip() method from geopandas to clip the reprojected EJI dataset to the boundaries of each fire perimeter.\n\n# Clip census tracts to Palisades fire perimeter\npalisades_clip = gpd.clip(eji_palisades.to_crs(palisades.crs), palisades)\n\n# Clip census tracts to Eaton fire perimeter\neaton_clip = gpd.clip(eji_eaton.to_crs(eaton.crs), eaton)\n\n\n# Visualization of census tracts clipped to fire perimeters\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))\n\nax2.axis('off')\nax1.axis('off')\n\n# Palisades census tracts\npalisades_clip.plot(ax = ax1, \n                column = 'TRACTCE',\n                edgecolor = 'white',\n                cmap = 'Dark2',\n                linewidth = 0.75,\n                legend = False\n                 )\n# Palisades fire perimeter\npalisades.plot(ax = ax1,\n              color = 'none',\n               edgecolor = 'red',\n               linewidth = 1.5\n              )\n\n# Eaton census tracts\neaton_clip.plot(ax = ax2, \n                column = 'TRACTCE',\n                edgecolor = 'white',\n                cmap = 'Dark2',\n                linewidth = 0.75,\n                legend = False\n                 )\n# Eaton fire perimeter\neaton.plot(ax = ax2,\n              color = 'none',\n               edgecolor = 'red',\n               linewidth = 1.5\n              )\n\n# Add fire perimeter labels\nax2.set_title('Eaton Fire Perimeter', fontsize=20)\nax1.set_title('Palisades Fire Perimeter', fontsize=20)\n\n\n# Create a legend for the fire perimeters\nperimeter_line = Line2D([0], [0], color='crimson', linewidth=1.7, label='Fire Perimeter')\nax1.legend(handles=[perimeter_line], loc='lower left', fontsize=14, facecolor='white', shadow=True, bbox_to_anchor=(0.02, 0.05))\n\n\n\n\n\n\n\n\nBefore visualizing socioeconomic data, I plot the Palisades and Eaton fire perimeters on a basemap to provide geographic context for where the fires occurred.\n\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\n# ADD FIRE PERIMETERS: UPDATE FILL TRANSPARENCY AND COLOR\npalisades_clip.plot(ax=ax,\n                   facecolor = 'crimson',\n                   alpha = 0.4)\n\neaton_clip.plot(ax=ax,\n               facecolor = 'crimson',\n               alpha = 0.4)\n\n\n\n# ADD BASEMAP USING CONTEXTILY\nctx.add_basemap(ax, source=ctx.providers.OpenStreetMap.Mapnik)\n\n\n\n# ADD TITLE\n\nax.axis('off')\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\nAfter clipping census tracts to the Palisades and Eaton fire areas and establishing spatial context, I visualize my variable of interest from the EJI dataset. I map the percentage of persons with income below 200% of the federal poverty level for each census tract that intersects the burn areas. The goal of this visualization is to show the pre-existing socioeconomic vulnerability of persons who resided in the communities affected by the fires.\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(20, 10))\n\n# Make an object for the variable of interest, which I've chosen to be E_POV200 (Percentage of persons with income below 200% of the federal poverty level)\neji_variable = 'E_POV200' # Percentage of persons with income below 200% of the federal poverty level\n\n# Find common min/max for legend range\nvmin = min(palisades_clip[eji_variable].min(), eaton_clip[eji_variable].min())\nvmax = max(palisades_clip[eji_variable].max(), eaton_clip[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\npalisades_clip.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    cmap = 'cool',\n    ax=ax1,\n    edgecolor='black',\n)\nax1.set_title('Palisades Fire Perimeter', fontsize=25)\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\neaton_clip.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    cmap = 'cool',\n    ax=ax2,\n    edgecolor='black',\n)\nax2.set_title('Eaton Fire Perimeter', fontsize=25)\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Percentage of Persons With Income Below \\n200% of Federal Poverty Level - Fire Areas Comparison',\n              fontsize=30,\n              weight='bold'\n              )\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax), cmap ='cool')\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('% of Persons with Income Below 200% Federal Poverty Level', fontsize=18)\nplt.show()\n\n\n\n\n\n\n\n\nThis map shows clear variation in economic vulnerability across the census tracts impacted by the Palisades and Eaton fires. Lighter shades represent lower percentages of residents living below 200% of the federal poverty level, while darker shades highlight areas with higher financial hardship. The results indicate that although both fires affect communities with a range of income levels, the Eaton fire area contains several tracts with noticeably higher concentrations of low-income residents. This suggests that wildfire impacts and recovery needs may not be evenly distributed across neighborhoods within the burned areas."
  }
]