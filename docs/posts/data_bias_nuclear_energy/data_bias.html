<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kaiju Morquecho Rubalcava">
<meta name="dcterms.date" content="2025-12-11">

<title>A Data Bias Case Study: Nuclear Energy Risk Assessment – Kaiju Morquecho Rubalcava</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a4fd41172508fde022c250737adf229b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../lochie.png" alt="" class="navbar-logo light-content">
    <img src="../../lochie.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kaiju Morquecho Rubalcava</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#case-description" id="toc-case-description" class="nav-link active" data-scroll-target="#case-description">Case Description</a>
  <ul class="collapse">
  <li><a href="#industry-bias" id="toc-industry-bias" class="nav-link" data-scroll-target="#industry-bias">Industry Bias</a></li>
  <li><a href="#measurement-bias" id="toc-measurement-bias" class="nav-link" data-scroll-target="#measurement-bias">Measurement Bias</a></li>
  <li><a href="#reflections" id="toc-reflections" class="nav-link" data-scroll-target="#reflections">Reflections</a></li>
  <li><a href="#solutions-reducing-bias-in-nuclear-risk-data" id="toc-solutions-reducing-bias-in-nuclear-risk-data" class="nav-link" data-scroll-target="#solutions-reducing-bias-in-nuclear-risk-data">Solutions: Reducing Bias in Nuclear Risk Data</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A Data Bias Case Study: Nuclear Energy Risk Assessment</h1>
</div>


<div class="quarto-title-meta-author column-page-left">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Kaiju Morquecho Rubalcava </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://bren.ucsb.edu/masters-programs/master-environmental-data-science/academics-meds-program">
            MEDS Graduate Student
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-page-left">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 11, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<hr>
<p>Ever since I was seven years old, I have been fascinated by nuclear accidents. At first, it was the eerie stillness of an abandoned city that captured my attention: Chernobyl. Later, it was Fukushima; this time not as history, but as something happening live. Watching the explosions on the news, I knew even then that what was unfolding would change Japan forever.</p>
<p>While nuclear energy itself represents an extraordinary human achievement, it is the catastrophic scale of nuclear accidents that has captivated me. The consequences of severe nuclear failures stretch far beyond everyday experience, unfolding across generations, ecosystems, and political borders in ways that are almost impossible to comprehend.</p>
<p>That fascination eventually led me to question not only how nuclear accidents occur, but how their risks are measured, classified, and communicated. These questions have become impossible to ignore as nuclear energy re-enters the spotlight. In the face of accelerating climate change, desperation has pushed societies back toward nuclear power as a solution to the global warming crisis we have created. When the stakes are this high, the way data are produced and interpreted matters profoundly. This blog post examines data bias in nuclear energy risk assessment, focusing on how institutional control over accident data and flawed measurement frameworks have systematically distorted our understanding of nuclear safety.</p>
<hr>
<section id="case-description" class="level1">
<h1>Case Description</h1>
<p>In environmental data science, bias refers to a systematic deviation from the truth. Rather than arising from random error, bias reflects predictable distortions embedded in how data are collected, measured, or interpreted (Konno et al., 2024). Biased estimates occur when an estimated effect consistently differs from the true effect due to structural problems within research or monitoring systems. In environmental contexts, this means data can appear raw and objective while still misrepresenting critical conditions.</p>
<p>Data bias in nuclear energy is particularly concerning because nuclear systems operate on scales of power, complexity, and potential harm that lie beyond human control. Since the development of nuclear technology, our understanding of its risks has depended on the scenarios and failure modes humans are capable of imagining—and time and again, reality has exceeded those expectations. Over time, biased data practices have narrowed our perception of nuclear risk, creating an illusion of safety and control that does not match the scale of the underlying hazards.</p>
<p>Drawing on Konno et al.’s (2024) framework, two forms of bias are especially relevant to nuclear energy risk assessment: industry or institutional bias and measurement bias.</p>
<p>Data on nuclear accidents are collected and maintained primarily by national regulatory agencies and international organizations responsible for overseeing nuclear energy, including industry-aligned institutions such as the International Atomic Energy Agency (IAEA). These datasets include records of nuclear incidents, classifications of accident severity, probabilistic safety analyses (PSAs), and summary statistics used to evaluate nuclear safety and justify regulatory decisions. One of the most widely used tools for communicating accident severity is the International Nuclear and Radiological Event Scale (INES).</p>
<p>These data serve both technical and political purposes: they inform safety protocols while shaping public narratives about the predictability and acceptability of nuclear energy. As Welch (1980) documents, many risk estimates were produced in contexts where political support for nuclear expansion depended on maintaining public confidence in the technology’s safety.</p>
<section id="industry-bias" class="level2">
<h2 class="anchored" data-anchor-id="industry-bias">Industry Bias</h2>
<p>Industry or institutional bias occurs when organizations responsible for promoting or regulating a technology also control the data used to evaluate its risks. In nuclear energy, this bias arises because accident reporting systems and risk classifications are managed by institutions with strong incentives to minimize perceived danger.</p>
<p>Welch’s (1980) analysis provides direct evidence of this bias. He documents how quantitative casualty estimates were removed from official reports, catastrophic accidents were labeled “incredible” by definition, and safety analyses were altered prior to public release to avoid undermining political support for nuclear power. These decisions were not driven by empirical uncertainty but by institutional pressures. By controlling what data were released and how risks were framed, industry-aligned institutions shaped public understanding while limiting democratic oversight (Welch, 1980).</p>
</section>
<section id="measurement-bias" class="level2">
<h2 class="anchored" data-anchor-id="measurement-bias">Measurement Bias</h2>
<p>Measurement bias arises when the tools used to quantify a phenomenon systematically misrepresent its true magnitude or distribution (Konno et al., 2024). In nuclear risk assessment, this bias is most evident in the INES scale and in probabilistic safety analyses.</p>
<p>Wheatley, Sovacool, and Sornette (2017) demonstrate that nuclear accidents follow a heavy-tailed distribution, meaning rare, catastrophic events dominate overall harm. Their analysis shows that major accidents such as Chernobyl and Fukushima would require severity ratings beyond the maximum INES level to accurately reflect their impacts. As a result, INES systematically underestimates the probability and consequences of extreme events.</p>
<p>Further evidence comes from Rose and Sweeting (2016), who find no statistical evidence of a learning effect in nuclear safety over time. Despite decades of operation and repeated accidents, nuclear systems have not become demonstrably safer. This challenges assumptions embedded in PSAs, which are limited to imagined scenarios and are not designed to estimate absolute risk in tightly coupled systems prone to cascading failures (Rose &amp; Sweeting, 2016; Wheatley et al., 2017).</p>
</section>
<section id="reflections" class="level2">
<h2 class="anchored" data-anchor-id="reflections">Reflections</h2>
<p>Scholars of technological risk have long argued that nuclear accidents should not be understood as rare deviations from otherwise controllable systems. Charles Perrow’s theory of normal accidents reframes failures in complex, tightly coupled technologies—such as nuclear power plants—as inevitable rather than exceptional. In these systems, small failures can cascade rapidly, outpacing human prediction and intervention (as discussed in Welch, 1980). From this perspective, nuclear accidents are expected outcomes of operating technologies whose complexity exceeds our capacity for full control.</p>
<p>This framing makes data bias especially dangerous. If serious accidents are inherent features of nuclear systems, then data practices that minimize uncertainty, compress severity, or treat catastrophic failures as implausible outliers actively undermine preparedness. This danger became strikingly clear during the 2022 Russian invasion of Ukraine, when military activity damaged containment structures at the Chernobyl site. No simulation test or regulatory framework had incorporated the possibility of full-scale war surrounding a nuclear disaster site. Military conflict fell outside the boundaries of “imaginable” failure scenarios—and therefore outside formal risk assessments. Yet it happened.</p>
<p>Nuclear risk is not confined to technical malfunction. It is entangled with geopolitical instability, human conflict, and conditions that resist quantification. When biased data reinforce the illusion of control, society is left making decisions based on a profoundly incomplete understanding of reality.</p>
</section>
<section id="solutions-reducing-bias-in-nuclear-risk-data" class="level2">
<h2 class="anchored" data-anchor-id="solutions-reducing-bias-in-nuclear-risk-data">Solutions: Reducing Bias in Nuclear Risk Data</h2>
<p>Addressing data bias in nuclear energy requires structural, institutional, and methodological reform. Because nuclear systems will always exceed our capacity for complete control, solutions must focus on transparency, independence, and honest representation of uncertainty.</p>
<p>First, institutional separation between nuclear promotion and risk data governance is essential. Welch (1980) shows that allowing industry-aligned agencies to control accident reporting creates incentives to suppress or sanitize information. Independent, international oversight bodies should be responsible for maintaining accident databases and reviewing risk assessments.</p>
<p>Second, measurement frameworks must move beyond the INES scale. While INES may function as a communication tool, it should be supplemented—or replaced—by quantitative, reproducible metrics based on radiation release, economic damage, environmental contamination, and long-term health impacts (Wheatley et al., 2017). Risk assessments must explicitly account for heavy-tailed distributions and worst-case scenarios rather than treating catastrophic events as anomalies.</p>
<p>Finally, insights from the Environmental Data &amp; Governance Initiative highlight the importance of public-interest data stewardship. EDGI argues that environmental data governance is inherently political and that public risk data cannot be trusted to institutions whose priorities conflict with transparency and justice (Nost et al., 2025). Archiving nuclear risk data with full context, metadata, and documentation of uncertainty would support democratic oversight and reduce the quiet erosion of public knowledge.</p>
<hr>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li><p>Konno, K., Gibbons, J., Lewis, R., &amp; Pullin, A. S. (2024). Potential types of bias when estimating causal effects in environmental research and how to interpret them. Environmental Evidence, 13(1), Article 1. https://doi.org/10.1186/s13750-024-00324-7</p></li>
<li><p>Nost, E., Gehrke, G., Vera, L., &amp; Hansen, S. (2025). Why the Environmental Data &amp; Governance Initiative is archiving public environmental data. Patterns, 6(1), Article 101151. https://doi.org/10.1016/j.patter.2024.101151</p></li>
<li><p>Rose, T., &amp; Sweeting, T. (2016). How safe is nuclear power? A statistical study suggests less than expected. Bulletin of the Atomic Scientists, 72(2), 112–115. https://doi.org/10.1080/00963402.2016.1145910</p></li>
<li><p>Welch, B. L. (1980). Nuclear power risks: Challenge to the credibility of science. International Journal of Health Services, 10(1), 5–36. https://doi.org/10.2190/NN0J-3X9Q-167L-UR7G</p></li>
<li><p>Wheatley, S., Sovacool, B. K., &amp; Sornette, D. (2017). Of disasters and dragon kings: A statistical analysis of nuclear power incidents and accidents. Risk Analysis, 37(1), 99–115. https://doi.org/10.1111/risa.12587</p></li>
</ol>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Kaiju Morquecho Rubalcava</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <i class="fa-brands fa-github" title="the octocat github icon" aria-label="github"></i></p>
</div>
  </div>
</footer>




</body></html>